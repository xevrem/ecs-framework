parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QtYG":[function(require,module,exports) {
"use strict";function t(t){return r(t)||a(t)||e(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t,n){if(t){if("string"==typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}function a(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t){if(Array.isArray(t))return i(t)}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,a=new Array(n);e<n;e++)a[e]=t[e];return a}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function u(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _(t,n,e){return n&&u(t.prototype,n),e&&u(t,e),t}function c(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Bag=void 0;var s=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;o(this,n),c(this,"__data",[]),c(this,"__count",0),this.__data=new Array(t),this.__count=0}return _(n,[{key:"forEach",value:function(){var t;return(t=this.__data).forEach.apply(t,arguments)}},{key:"map",value:function(){var t;return(t=this.__data).map.apply(t,arguments)}},{key:"filter",value:function(){var t;return(t=this.__data).filter.apply(t,arguments)}},{key:"reduce",value:function(){var t;return(t=this.__data).reduce.apply(t,arguments)}},{key:"get",value:function(t){return this.__data[t]}},{key:"set",value:function(t,n){return t<0?null:(t>=this.__data.length?this.grow(2*t):t>=this.__count&&(this.__count=t+1),this.__data[t]=n,n)}},{key:"add",value:function(t){this.__count>=this.__data.length&&this.grow(),this.__data[this.__count]=t,this.__count++}},{key:"addRange",value:function(t){for(var n=0;t.length>n;n++)this.add(t.get(n))}},{key:"clear",value:function(){this.__data=this.__data.map(function(t){}),this.__count=0}},{key:"contains",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t,n){return t===n};return!!this.__data.find(function(e){return n(t,e)})}},{key:"remove",value:function(t){var n=this.__data.indexOf(t);return this.removeAt(n)}},{key:"removeAt",value:function(t){if(t<this.__data.length&&t>=0){var n=this.__data[t];return this.__count--,this.__data[t]=this.__data[this.__count],this.__data[this.__count]=void 0,n}return null}},{key:"removeLast",value:function(){this.__count--;var t=this.__data[this.__count];return this.__data[this.__count]=void 0,t}},{key:"grow",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2*this.__data.length+1;this.__data=[].concat(t(this.__data),t(new Array(n-this.__data.length)))}},{key:"capacity",get:function(){return this.__data.length}},{key:"isEmpty",get:function(){return 0===this.__count}},{key:"count",get:function(){return this.__count}}]),n}();exports.Bag=s;
},{}],"bWK7":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=void 0;var o=function(){function t(){e(this,t),r(this,"__owner",null)}return n(t,[{key:"type",get:function(){return this.constructor.type},set:function(e){this.constructor.type=e}},{key:"owner",get:function(){return this.__owner},set:function(e){this.__owner=e}}],[{key:"type",get:function(){return this.__type},set:function(e){this.__type=e}}]),t}();exports.Component=o,r(o,"__type",-1);
},{}],"tvY2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentManager=void 0;var e=require("./Bag");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}var i=function(){function n(o){t(this,n),this.__ecsInstance=o,this.__components=new e.Bag,this.__nextTypeId=0}return o(n,[{key:"registerComponent",value:function(t){t.type>=0||(t.type=this.__nextTypeId++),t.type<this.__components.capacity?void 0===this.__components.get(t.type)&&this.__components.set(t.type,new e.Bag):this.__components.set(t.type,new e.Bag)}},{key:"getComponent",value:function(e,t){return this.__components.get(t.type).get(e.id)}},{key:"addComponent",value:function(e,t){t.owner=e.id,this.__components.get(t.type).set(e.id,t)}},{key:"removeComponents",value:function(e){for(var t=0;t<this.__components.count;t++)this.__components.get(t).set(e.id,void 0)}},{key:"removeComponent",value:function(e){this.__components.get(e.type).set(e.owner,void 0)}},{key:"deleteEntity",value:function(e){this.removeComponents(e)}},{key:"hasComponent",value:function(e,t){return t<this.__components.capacity&&e.id<this.__components.get(t).capacity&&void 0!==this.__components.get(t).get(e.id)}},{key:"cleanUp",value:function(){for(var e=0;e<this.__components.count;e++)void 0!==this.__components.get(e)&&this.__components.get(e).clear()}},{key:"components",get:function(){return this.__components}}]),n}();exports.ComponentManager=i;
},{"./Bag":"QtYG"}],"sSAb":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComponentMapper=void 0;var o=function(){function n(t,o){e(this,n),this.__type=t.type,this.__ecsInstance=o}return t(n,[{key:"get",value:function(e){return this.__ecsInstance.componentManager.components.get(this.__type).get(e.id)}}],[{key:"get",value:function(e,n,t){return t.componentManager.components.get(e).get(n.id)}}]),n}();exports.ComponentMapper=o;
},{}],"MNIs":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Entity=void 0;var i=function(){function t(){e(this,t),r(this,"__id",-1)}return n(t,[{key:"id",get:function(){return this.__id},set:function(e){this.__id=e}}]),t}();exports.Entity=i;
},{}],"kq53":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.EntityManager=void 0;var t=require("./Bag"),e=require("./Entity");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var s=function(){function i(e){n(this,i),this.__ecsInstance=e,this.__entities=new t.Bag,this.__oldIds=[],this.__nextId=0}return r(i,[{key:"create",value:function(){var t=new e.Entity;return this.__oldIds.length>0?t.id=this.__oldIds.shift():t.id=this.__nextId++,this.__entities.set(t.id,t),t}},{key:"getEntityCount",value:function(){return this.__entities.count}},{key:"deleteEntity",value:function(t){this.__oldIds.push(t.id),this.__entities.set(t.id,void 0)}},{key:"cleanUp",value:function(){this.__oldIds=[],this.__entities.clear()}}]),i}();exports.EntityManager=s;var a=s;exports.default=a;
},{"./Bag":"QtYG","./Entity":"MNIs"}],"eZDM":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SystemManager=void 0;var o=function(){function t(n){e(this,t),s(this,"__ecsInstance",null),s(this,"__systems",[]),this.__ecsInstance=n,this.__systems=[]}return n(t,[{key:"setSystem",value:function(e){for(var t=this,n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return s.forEach(function(n){t.__ecsInstance.componentManager.registerComponent(n),e.componentTypes.push(n.type)}),e.ecsInstance=this.__ecsInstance,this.__systems.push(e),e}},{key:"initializeSystems",value:function(){this.__systems.forEach(function(e){return e.initialize()})}},{key:"systemsLoadContent",value:function(){this.__systems.forEach(function(e){return e.loadContent()})}},{key:"resolve",value:function(e){var t=this,n=!1;this.__systems.forEach(function(s){n=!0,s.componentTypes.forEach(function(s){n=n&&t.__ecsInstance.hasComponent(e,s)}),n?s.addEntity(e):s.removeEntity(e)})}},{key:"deleteEntity",value:function(e){this.__systems.forEach(function(t){return t.removeEntity(e)})}},{key:"cleanUp",value:function(){this.__systems.forEach(function(e){return e.cleanSystem()}),this.__systems=[]}}]),t}();exports.SystemManager=o;
},{}],"GaQF":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TagManager=void 0;var a=function(){function t(){e(this,t),this.__tags={}}return n(t,[{key:"getEntityByTag",value:function(e){return this.__tags[e]}},{key:"tagEntity",value:function(e,t){this.__tags[e]=t}},{key:"refresh",value:function(e){}},{key:"deleteEntity",value:function(e){var t=this;Object.keys(this.__tags).forEach(function(n){t.__tags[n]===e&&delete t.__tags[n]})}},{key:"cleanUp",value:function(){this.__tags={}}}]),t}();exports.TagManager=a;
},{}],"U0l0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GroupManager=void 0;var e=require("./Bag");function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var o=function(){function t(){r(this,t),this.__groups={}}return n(t,[{key:"addEntityToGroup",value:function(r,t){this.__groups.hasOwnProperty(r)||(this.__groups[r]=new e.Bag),this.__groups[r].contains(t)||this.__groups[r].add(t)}},{key:"getGroup",value:function(e){return this.__groups[e]}},{key:"refresh",value:function(e){}},{key:"deleteEntity",value:function(e){Object.values(this.__groups).forEach(function(r){r.remove(e)})}},{key:"cleanUp",value:function(){var e=this;Object.keys(this.__groups).forEach(function(r){e.__groups[r].clear(),delete e.__groups[r]})}}]),t}();exports.GroupManager=o;
},{"./Bag":"QtYG"}],"IoL9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EcsInstance=void 0;var e=require("./EntityManager"),t=require("./ComponentManager"),n=require("./SystemManager"),a=require("./TagManager"),i=require("./GroupManager");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var u=function(){function s(){r(this,s),this.entityManager=new e.EntityManager(this),this.componentManager=new t.ComponentManager(this),this.systemManager=new n.SystemManager(this),this.tagManager=new a.TagManager,this.groupManager=new i.GroupManager,this.__updating=[],this.__deleting=[],this.__delta=0,this.__lastTime=0,this.__elapsed=0}return o(s,[{key:"create",value:function(){return this.entityManager.create()}},{key:"addComponent",value:function(e,t){this.componentManager.addComponent(e,t)}},{key:"removeComponent",value:function(e){this.componentManager.removeComponent(e)}},{key:"hasComponent",value:function(e,t){return this.componentManager.hasComponent(e,t)}},{key:"resolve",value:function(e){e&&this.__updating.push(e)}},{key:"deleteEntity",value:function(e){e&&this.__deleting.push(e)}},{key:"resolveEntities",value:function(){var e=this;this.__updating.length>0&&(this.__updating.forEach(function(t){return e.systemManager.resolve(t)}),this.__updating=[]),this.__deleting.length>0&&(this.__deleting.forEach(function(t){e.systemManager.deleteEntity(t),e.tagManager.deleteEntity(t),e.groupManager.deleteEntity(t),e.componentManager.deleteEntity(t),e.entityManager.deleteEntity(t)}),this.__deleting=[])}},{key:"updateTime",value:function(e){this.__delta=e-this.__lastTime,this.__elapsed+=this.__delta,this.__lastTime=e}},{key:"updateByDelta",value:function(e){this.__delta=e,this.__elapsed+=this.__delta,this.__lastTime=performance.now()}},{key:"cleanUp",value:function(){this.entityManager.cleanUp(),this.componentManager.cleanUp(),this.systemManager.cleanUp(),this.groupManager.cleanUp(),this.tagManager.cleanUp()}},{key:"delta",get:function(){return this.__delta}},{key:"elapsed",get:function(){return this.__elapsed}}]),s}();exports.EcsInstance=u;
},{"./EntityManager":"kq53","./ComponentManager":"tvY2","./SystemManager":"eZDM","./TagManager":"GaQF","./GroupManager":"U0l0"}],"CiAW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntitySystem=void 0;var e=require("./Bag");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function n(){t(this,n),s(this,"__componentTypes",[]),s(this,"__entities",new e.Bag),s(this,"__ecsInstance",null)}return i(n,[{key:"loadContent",value:function(){this.preLoadContent(this.__entities)}},{key:"removeEntity",value:function(e){this.__entities.remove(e)&&this.removed(e)}},{key:"addEntity",value:function(e){this.__entities.contains(e,function(e,t){return t&&e.id===t.id})?this.updated(e):(this.__entities.add(e),this.added(e))}},{key:"cleanSystem",value:function(){this.cleanUp(this.__entities),this.__entities.clear()}},{key:"processAll",value:function(){this.shouldProcess()&&(this.begin(),this.processEntities(this.__entities),this.end())}},{key:"processEntities",value:function(e){var t=this;e.forEach(function(e){e&&t.process(e,t.__ecsInstance.delta)})}},{key:"shouldProcess",value:function(){return!0}},{key:"initialize",value:function(){}},{key:"preLoadContent",value:function(e){}},{key:"removed",value:function(e){}},{key:"added",value:function(e){}},{key:"updated",value:function(e){}},{key:"cleanUp",value:function(e){}},{key:"begin",value:function(){}},{key:"end",value:function(){}},{key:"process",value:function(e){}},{key:"ecsInstance",get:function(){return this.__ecsInstance},set:function(e){this.__ecsInstance=e}},{key:"componentTypes",get:function(){return this.__componentTypes},set:function(e){this.__componentTypes=e}}]),n}();exports.EntitySystem=o;
},{"./Bag":"QtYG"}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Bag"),r=require("./Component"),n=require("./ComponentManager"),a=require("./ComponentMapper"),t=require("./EcsInstance"),o=require("./Entity"),i=require("./EntityManager"),p=require("./EntitySystem"),g=require("./GroupManager"),u=require("./SystemManager"),M=require("./TagManager"),s={Bag:e.Bag,Component:r.Component,ComponentManager:n.ComponentManager,ComponentMapper:a.ComponentMapper,EcsInstance:t.EcsInstance,Entity:o.Entity,EntityManager:i.EntityManager,EntitySystem:p.EntitySystem,GroupManager:g.GroupManager,SystemManager:u.SystemManager,TagManager:M.TagManager};exports.default=s;
},{"./Bag":"QtYG","./Component":"bWK7","./ComponentManager":"tvY2","./ComponentMapper":"sSAb","./EcsInstance":"IoL9","./Entity":"MNIs","./EntityManager":"kq53","./EntitySystem":"CiAW","./GroupManager":"U0l0","./SystemManager":"eZDM","./TagManager":"GaQF"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map